What is holidata?
=================

Holidata is a utility for algorithmically producing holidays for a given locale
and year. This requires date calculations and a syntax for defining the formula
for a holiday.

Formula
-------

What is needed to calculate holidays?  Here are the necessary elements:

  - Determination of Easter Sunday
  - Add/subtract a fixed number of days to a date
  - Project forwards to the next Monday
  - Project backwards to the previous Friday
  - Determine 'first/last/Nth X in Y' dates
  - Some metadata regarding the type of holiday

Given the above, a formula can be written to define each holiday.


Formula Syntax
--------------



---

Notes from Dirk:

Nearly all holiday dates in Germany fall into one of two categories, fixed or depending on easter. That makes them easy to describe. It will be much more difficult in other countries like Great Britain where holidays are shifted (postponed?) to the next weekday if they occur on weekends.

So, I can think of a this:

postpone = yes # Great Britain

Depending on easter:
easter -52 days: Old Maids' Day
easter -48 days: Carnival Monday
easter -46 days: Ash Wednesday
easter  -2 days: Good Friday
easter     days: Easter Sunday
easter  +1 days: Easter Monday
easter +39 days: Ascension Day (Father's Day)
easter +49 days: Whit Sunday
easter +50 days: Whit Monday
easter +60 days: Feast of Corpus Christi

June - 1 Friday: Last Friday in June
July + 2 Monday: Second Monday in July

If you put that in brackets, you could do maths.

There is a funfair in my hometown which starts on the day before the 1st Saturday of August.

(August + 1 Saturday) - 1 day: Cranger Kirmes Start

---

From holidata.net.git/data/US.csv:

  "en-CA", "",     "2016-02-08", "Family Day",                                                          "NV",  "3rd monday in Feb."

  "el-GR", "",     "2012-01-01", "Πρωτοχρονιά",                                                         "NF",  "New year's eve"
  "el-GR", "",     "2012-01-06", "Θεοφάνεια",                                                           "NRF", "Epiphany"
  "el-GR", "",     "2012-02-28", "Καθαρά Δευτέρα",                                                      "NRV", "Beginning of 7th week before Orthodoc Easter Sunday"
  "el-GR", "",     "2012-03-25", "Ευαγγελισμός της Θεοτόκου και Εθνική Ημέρα Ανεξαρτησίας της Ελλάδας", "NF",  "Annunciation to the blessed Virgin Mary & Liberation Day"
  "el-GR", "",     "2012-04-13", "Μεγάλη Παρασκευή",                                                    "NRV", "Eastern Easter - 2d"
  "el-GR", "",     "2012-04-14", "Μεγάλο Σάββατο",                                                      "NRV", "Eastern Easter - 1d"
  "el-GR", "",     "2012-04-15", "Πάσχα",                                                               "NRV", "Eastern Easter (same as ru-RU)"
  "el-GR", "",     "2012-04-16", "Δευτέρα του Πάσχα",                                                   "NRV", "Eastern Easter + 1d"
  "el-GR", "",     "2012-05-01", "Πρωτομαγιά",                                                          "NF",  "International worker's day"
  "el-GR", "",     "2012-05-28", "Δευτέρα του Αγίου Πνεύματος",                                         "NRV", "7 weeks after Eastern Easter + 1d - Monday"
  "el-GR", "",     "2012-08-15", "Κοίμηση της Θεοτόκου",                                                "NRF", "Assumption of Mary"
  "el-GR", "",     "2012-10-28", "Ημέρα του ΌΧΙ",                                                       "NF",  "Ohi Day"
  "el-GR", "",     "2012-12-25", "Χριστούγεννα",                                                        "NRF", "Christmas"
  "el-GR", "",     "2012-12-26", "Επόμενη ημέρα Χριστουγέννων",                                         "NRF", "Second day of Christmas"

---

The holidata utility will return an ISO-8601 formatted date, ie YYYY-MM-DD.
Any other details are application-specific, so the utility only needs to convert
a holiday description to a date.

The "NRF" (etc) holiday flags can also be partially emitted. The "R", "F" and
"V" flags are sometimes known.  If emitted, they should be merged with
expectations.

---

Syntax:

The major forms to be supported are:

1) Fixed, specified date:

   <date>

2) Specified date, with pre- and postponement to a monday:

   <date> --> monday
   monday <-- <date>

3) Ѕpecified date, adjusted to the nearest week day (Saturday --> Friday,
   Sunday --> Monday):

   <date> --> nearest week day

3) Date plus calculated offset:

   <date> + <duration> + <duration>

4) Counted days:

   a) <Nth> <day> in <month>
   b) <Nth> <weekday> in <month>

---
